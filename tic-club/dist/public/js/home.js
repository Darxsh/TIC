async function updateHeroSection(){try{const e=await fetch("/api/content?type=hero"),t=await e.json();if(t&&t.length>0){const e=t[0];document.querySelector(".hero-content h1").textContent=e.title,document.querySelector(".hero-content p:first-of-type").textContent=e.subtitle,document.querySelector(".hero-content p:last-of-type").textContent=e.content,e.imageUrl&&(document.querySelector(".hero-image img").src=e.imageUrl)}}catch(e){console.error("Error updating hero section:",e)}}async function updateMissionSection(){try{const e=await fetch("/api/content?type=mission"),t=await e.json();if(t&&t.length>0){document.querySelector(".mission-cards").innerHTML=t.sort(((e,t)=>e.order-t.order)).map((e=>`\n                    <div class="mission-card animate-fadeInUp">\n                        <div class="icon"><i class="${e.icon||"fas fa-check"}"></i></div>\n                        <h3>${e.title}:</h3>\n                        <p>${e.content}</p>\n                    </div>\n                `)).join("")}}catch(e){console.error("Error updating mission section:",e)}}async function updateVisionSection(){try{const e=await fetch("/api/content?type=vision"),t=await e.json();if(t&&t.length>0){document.querySelector(".vision-cards").innerHTML=t.sort(((e,t)=>e.order-t.order)).map((e=>`\n                    <div class="vision-card animate-fadeInUp">\n                        <div class="icon"><i class="${e.icon||"fas fa-check"}"></i></div>\n                        <h3>${e.content}</h3>\n                    </div>\n                `)).join("")}}catch(e){console.error("Error updating vision section:",e)}}async function updateEventsPreview(){try{const e=await fetch("/api/content?type=event"),t=await e.json();if(t&&t.length>0){document.querySelector(".event-cards").innerHTML=t.sort(((e,t)=>new Date(e.date)-new Date(t.date))).map((e=>`\n                    <div class="event-card animate-fadeInUp">\n                        <div class="event-image">\n                            ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}">`:""}\n                        </div>\n                        <div class="event-content">\n                            <h3>${e.title}</h3>\n                            <div class="date">\n                                <i class="fas fa-calendar"></i> \n                                ${new Date(e.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}\n                            </div>\n                            <p>${e.content}</p>\n                        </div>\n                    </div>\n                `)).join("")}}catch(e){console.error("Error updating events preview:",e)}}function initializeAchievementsSwiper(){document.querySelector(".achievements .swiper-wrapper")&&new Swiper(".achievements .swiper",{slidesPerView:"auto",spaceBetween:20,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:10},480:{slidesPerView:2,spaceBetween:15},768:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:20}}})}async function updateAchievements(){try{const e=await fetch("/api/content?type=achievement"),t=await e.json();if(t&&t.length>0){document.querySelector(".achievements .swiper-wrapper").innerHTML=t.sort(((e,t)=>t.createdAt-e.createdAt)).map((e=>`\n                    <div class="swiper-slide">\n                        <div class="achievement-card">\n                            ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}">`:'<div class="placeholder-image"></div>'}\n                            <h3>${e.title}</h3>\n                            <p>${e.content}</p>\n                        </div>\n                    </div>\n                `)).join(""),t.length>4&&initializeAchievementsSwiper()}}catch(e){console.error("Error updating achievements:",e)}}async function loadUpcomingEvents(){try{const e=await fetch("/api/events?limit=3&upcoming=true");if(!e.ok)throw new Error("Failed to fetch events");displayEvents(await e.json())}catch(e){console.error("Error loading events:",e)}}function displayEvents(e){const t=document.getElementById("events-container");t.innerHTML="",e.forEach((e=>{const n=new Date(e.date),i=document.createElement("div");i.className="col-md-4 mb-4",i.innerHTML=`\n            <div class="card h-100">\n                ${e.image?`<img src="${e.image}" class="card-img-top" alt="${e.title}">`:""}\n                <div class="card-body">\n                    <h5 class="card-title">${e.title}</h5>\n                    <p class="card-text">${e.description}</p>\n                    <p class="card-text">\n                        <small class="text-muted">\n                            <i class="far fa-calendar"></i> ${n.toLocaleDateString()}\n                            <br>\n                            <i class="far fa-clock"></i> ${e.time}\n                        </small>\n                    </p>\n                </div>\n                <div class="card-footer bg-transparent">\n                    <a href="/pages/events.html#${e._id}" class="btn btn-primary btn-sm">Learn More</a>\n                </div>\n            </div>\n        `,t.appendChild(i)}))}async function loadFeaturedProjects(){try{const e=await fetch("/api/projects?featured=true&limit=3");if(!e.ok)throw new Error("Failed to fetch projects");displayProjects(await e.json())}catch(e){console.error("Error loading projects:",e)}}function displayProjects(e){const t=document.getElementById("projects-container");t.innerHTML="",e.forEach((e=>{const n=document.createElement("div");n.className="col-md-4 mb-4",n.innerHTML=`\n            <div class="card h-100">\n                ${e.image?`<img src="${e.image}" class="card-img-top" alt="${e.title}">`:""}\n                <div class="card-body">\n                    <h5 class="card-title">${e.title}</h5>\n                    <p class="card-text">${e.description}</p>\n                    <div class="project-tech">\n                        ${e.technologies.map((e=>`\n                            <span class="badge bg-secondary me-1">${e}</span>\n                        `)).join("")}\n                    </div>\n                </div>\n                <div class="card-footer bg-transparent">\n                    <a href="/pages/projects.html#${e._id}" class="btn btn-primary btn-sm">View Project</a>\n                </div>\n            </div>\n        `,t.appendChild(n)}))}document.addEventListener("DOMContentLoaded",(async()=>{await Promise.all([updateHeroSection(),updateMissionSection(),updateVisionSection(),updateEventsPreview(),updateAchievements(),loadUpcomingEvents(),loadFeaturedProjects()])}));