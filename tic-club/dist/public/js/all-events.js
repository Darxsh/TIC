document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(".events-grid"),e=document.querySelectorAll(".filter-btn");function n(t){const e=new Date(t),n=new Date,s=864e5;return e<n-s?"past":e>n+s?"upcoming":"ongoing"}function s(t){return`\n            <div class="event-card" data-status="${t.status}">\n                <div class="event-image-container">\n                    <img src="${t.image}" alt="${t.title}" class="event-image">\n                </div>\n                <div class="event-content">\n                    <h3 class="event-title">${t.title}</h3>\n                    <div class="event-date">${t.date}</div>\n                    <div class="event-time">${t.time}</div>\n                    <p class="event-description">${t.description}</p>\n                    <div class="event-coordinators">\n                        ${t.coordinator?`<p>Coordinator: ${t.coordinator}</p>`:""}\n                        ${t.faculty?`<p>Faculty: ${t.faculty}</p>`:""}\n                    </div>\n                    <div class="event-footer">\n                        <span class="event-status status-${t.status}">\n                            ${t.status.charAt(0).toUpperCase()+t.status.slice(1)}\n                        </span>\n                        <button class="register-btn" ${"past"===t.status?"disabled":""}>\n                            ${"past"===t.status?"Event Ended":"Register Now"}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `}async function i(e="all"){t.innerHTML='<div class="loading-spinner">Loading events...</div>';const i=await async function(){try{const t=await fetch("/pages/events.html"),e=await t.text(),s=(new DOMParser).parseFromString(e,"text/html").querySelectorAll(".carousel .card");return Array.from(s).map((t=>({title:t.querySelector(".card-title").textContent,date:t.querySelector(".card-date").textContent,description:t.querySelector(".event-details").textContent,coordinator:t.querySelector(".coordinator-name")?.textContent||"",faculty:t.querySelector(".faculty-name")?.textContent||"",time:t.querySelector(".event-time")?.textContent||"",status:n(t.querySelector(".card-date").textContent),image:t.querySelector(".event-image")?.getAttribute("src")||"/images/events/default.jpg"})))}catch(t){return console.error("Error fetching events:",t),[]}}(),a="all"===e?i:i.filter((t=>t.status===e));0!==a.length?(t.innerHTML=a.map(s).join(""),document.querySelectorAll(".register-btn").forEach((t=>{t.disabled||t.addEventListener("click",(function(t){const e=this.closest(".event-card"),n=e.querySelector(".event-title").textContent,s=e.querySelector(".event-date").textContent;showRegistrationModal(n,s)}))}))):t.innerHTML=`\n                <div class="no-events">\n                    <i class="fas fa-calendar-times"></i>\n                    <p>No ${e} events found</p>\n                </div>\n            `}e.forEach((t=>{t.addEventListener("click",(function(){e.forEach((t=>t.classList.remove("active"))),this.classList.add("active"),i(this.dataset.filter)}))})),function(){const t=document.createElement("div");t.className="techfusion-notification",t.innerHTML='\n            <div class="notification-content">\n                <div class="bot-animation">\n                    <div class="bot-head">\n                        <div class="bot-eye left"></div>\n                        <div class="bot-eye right"></div>\n                    </div>\n                    <div class="bot-body"></div>\n                </div>\n                <div class="notification-text">\n                    <h3>TechFusion 2K25-26</h3>\n                    <p>Coming Soon! Stay tuned for dates</p>\n                </div>\n                <button class="notification-close">Ã—</button>\n            </div>\n        ',document.body.appendChild(t),t.querySelector(".notification-close").addEventListener("click",(()=>{t.classList.add("fade-out"),setTimeout((()=>t.remove()),300)})),setTimeout((()=>{document.body.contains(t)&&(t.classList.add("fade-out"),setTimeout((()=>t.remove()),300))}),1e4)}(),i()}));