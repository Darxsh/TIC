function isInitialLoadOrRefresh(){return sessionStorage.getItem("pageLoaded")?1===performance.navigation.type:(sessionStorage.setItem("pageLoaded","true"),!0)}function handleLoading(){isInitialLoadOrRefresh()&&"/loading.html"!==window.location.pathname&&(sessionStorage.setItem("destination",window.location.pathname),window.location.href="/loading.html")}const pagesToPreload=["/pages/gallery.html","/pages/events.html","/pages/about.html","/pages/contact.html"],pageCache=new Map;async function preloadPages(){const e=pagesToPreload.map((async e=>{try{const a=await fetch(e),t=await a.text();pageCache.set(e,t)}catch(a){console.warn(`Failed to preload ${e}:`,a)}}));await Promise.all(e)}function initLoading(){const e=document.querySelector(".loader");e&&(e.style.display="flex")}function hideLoading(){const e=document.querySelector(".loader");e&&(e.style.opacity="0",setTimeout((()=>{e.style.display="none"}),500))}"loading"===document.readyState&&handleLoading(),window.addEventListener("load",(()=>{initLoading(),preloadPages().then((()=>{hideLoading()}))}));