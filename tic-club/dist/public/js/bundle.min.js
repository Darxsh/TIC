document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".events-grid"),t=document.querySelectorAll(".filter-btn");function n(e){const t=new Date(e),n=new Date,i=864e5;return t<n-i?"past":t>n+i?"upcoming":"ongoing"}function i(e){return`\n            <div class="event-card" data-status="${e.status}">\n                <div class="event-image-container">\n                    <img src="${e.image}" alt="${e.title}" class="event-image">\n                </div>\n                <div class="event-content">\n                    <h3 class="event-title">${e.title}</h3>\n                    <div class="event-date">${e.date}</div>\n                    <div class="event-time">${e.time}</div>\n                    <p class="event-description">${e.description}</p>\n                    <div class="event-coordinators">\n                        ${e.coordinator?`<p>Coordinator: ${e.coordinator}</p>`:""}\n                        ${e.faculty?`<p>Faculty: ${e.faculty}</p>`:""}\n                    </div>\n                    <div class="event-footer">\n                        <span class="event-status status-${e.status}">\n                            ${e.status.charAt(0).toUpperCase()+e.status.slice(1)}\n                        </span>\n                        <button class="register-btn" ${"past"===e.status?"disabled":""}>\n                            ${"past"===e.status?"Event Ended":"Register Now"}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `}async function a(t="all"){e.innerHTML='<div class="loading-spinner">Loading events...</div>';const a=await async function(){try{const e=await fetch("/pages/events.html"),t=await e.text(),i=(new DOMParser).parseFromString(t,"text/html").querySelectorAll(".carousel .card");return Array.from(i).map((e=>({title:e.querySelector(".card-title").textContent,date:e.querySelector(".card-date").textContent,description:e.querySelector(".event-details").textContent,coordinator:e.querySelector(".coordinator-name")?.textContent||"",faculty:e.querySelector(".faculty-name")?.textContent||"",time:e.querySelector(".event-time")?.textContent||"",status:n(e.querySelector(".card-date").textContent),image:e.querySelector(".event-image")?.getAttribute("src")||"/images/events/default.jpg"})))}catch(e){return console.error("Error fetching events:",e),[]}}(),o="all"===t?a:a.filter((e=>e.status===t));0!==o.length?(e.innerHTML=o.map(i).join(""),document.querySelectorAll(".register-btn").forEach((e=>{e.disabled||e.addEventListener("click",(function(e){const t=this.closest(".event-card"),n=t.querySelector(".event-title").textContent,i=t.querySelector(".event-date").textContent;showRegistrationModal(n,i)}))}))):e.innerHTML=`\n                <div class="no-events">\n                    <i class="fas fa-calendar-times"></i>\n                    <p>No ${t} events found</p>\n                </div>\n            `}t.forEach((e=>{e.addEventListener("click",(function(){t.forEach((e=>e.classList.remove("active"))),this.classList.add("active"),a(this.dataset.filter)}))})),function(){const e=document.createElement("div");e.className="techfusion-notification",e.innerHTML='\n            <div class="notification-content">\n                <div class="bot-animation">\n                    <div class="bot-head">\n                        <div class="bot-eye left"></div>\n                        <div class="bot-eye right"></div>\n                    </div>\n                    <div class="bot-body"></div>\n                </div>\n                <div class="notification-text">\n                    <h3>TechFusion 2K25-26</h3>\n                    <p>Coming Soon! Stay tuned for dates</p>\n                </div>\n                <button class="notification-close">Ã—</button>\n            </div>\n        ',document.body.appendChild(e),e.querySelector(".notification-close").addEventListener("click",(()=>{e.classList.add("fade-out"),setTimeout((()=>e.remove()),300)})),setTimeout((()=>{document.body.contains(e)&&(e.classList.add("fade-out"),setTimeout((()=>e.remove()),300))}),1e4)}(),a()}));class ContentLoader{constructor(){this.currentPage=window.location.pathname.split("/").pop().replace(".html","")||"home"}async loadPageContent(){try{const e=await fetch(`/api/content/${this.currentPage}`),t=(await e.json()).reduce(((e,t)=>(e[t.section]||(e[t.section]=[]),e[t.section].push(t),e)),{});Object.entries(t).forEach((([e,t])=>{this.renderSectionContent(e,t)}))}catch(e){console.error("Error loading page content:",e)}}renderSectionContent(e,t){const n=document.getElementById(e);if(n)switch(e){case"hero":this.renderHeroSection(n,t[0]);break;case"club-overview":this.renderClubOverview(n,t[0]);break;case"team-member":this.renderTeamMembers(n,t);break;case"history-timeline":this.renderHistoryTimeline(n,t);break;case"event-hero":this.renderEventHero(n,t[0]);break;case"featured-event":this.renderFeaturedEvents(n,t);break;case"workshop":case"hackathon":case"lecture":case"tech-talk":this.renderEventCards(n,t);break;case"gallery-item":this.renderGalleryItems(n,t);break;case"membership-plan":this.renderMembershipPlans(n,t);break;case"membership-benefit":this.renderMembershipBenefits(n,t);break;case"project-item":this.renderProjectItems(n,t);break;default:this.renderDefaultContent(n,t)}}renderHeroSection(e,t){t&&(e.innerHTML=`\n            <div class="hero-content">\n                <h1>${t.title}</h1>\n                ${t.subtitle?`<p class="subtitle">${t.subtitle}</p>`:""}\n                <p>${t.content}</p>\n            </div>\n            ${t.imageUrl?`<div class="hero-image"><img src="${t.imageUrl}" alt="${t.title}"></div>`:""}\n        `)}renderClubOverview(e,t){t&&(e.innerHTML=`\n            <h2>${t.title}</h2>\n            ${t.subtitle?`<h3>${t.subtitle}</h3>`:""}\n            <div class="overview-content">\n                ${t.content.split("\n").map((e=>`<p>${e}</p>`)).join("")}\n            </div>\n            ${t.imageUrl?`<img src="${t.imageUrl}" alt="${t.title}" class="overview-image">`:""}\n        `)}renderTeamMembers(e,t){e.innerHTML=`\n            <div class="team-grid">\n                ${t.map((e=>`\n                    <div class="team-card">\n                        ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}" class="member-image">`:""}\n                        <h3>${e.title}</h3>\n                        ${e.subtitle?`<h4>${e.subtitle}</h4>`:""}\n                        <p>${e.content}</p>\n                    </div>\n                `)).join("")}\n            </div>\n        `}renderHistoryTimeline(e,t){e.innerHTML=`\n            <div class="timeline">\n                ${t.map(((e,t)=>`\n                    <div class="timeline-item ${t%2==0?"left":"right"}">\n                        <div class="timeline-content">\n                            <h3>${e.title}</h3>\n                            ${e.subtitle?`<div class="timeline-date">${e.subtitle}</div>`:""}\n                            <p>${e.content}</p>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n        `}renderEventHero(e,t){t&&(e.innerHTML=`\n            <div class="event-hero">\n                <h1>${t.title}</h1>\n                ${t.subtitle?`<p class="event-date">${t.subtitle}</p>`:""}\n                <p class="event-description">${t.content}</p>\n                ${t.imageUrl?`<img src="${t.imageUrl}" alt="${t.title}" class="event-hero-image">`:""}\n            </div>\n        `)}renderFeaturedEvents(e,t){e.innerHTML=`\n            <div class="featured-events-slider">\n                ${t.map((e=>`\n                    <div class="featured-event-slide">\n                        ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}" class="event-image">`:""}\n                        <div class="event-info">\n                            <h3>${e.title}</h3>\n                            ${e.subtitle?`<p class="event-date">${e.subtitle}</p>`:""}\n                            <p>${e.content}</p>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n        `,"undefined"!=typeof Swiper&&t.length>1&&new Swiper(".featured-events-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0}})}renderEventCards(e,t){e.innerHTML=`\n            <div class="event-cards">\n                ${t.map((e=>`\n                    <div class="event-card">\n                        ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}" class="event-card-image">`:""}\n                        <div class="event-card-content">\n                            <h3>${e.title}</h3>\n                            ${e.subtitle?`<p class="event-date">${e.subtitle}</p>`:""}\n                            <p>${e.content}</p>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n        `}renderGalleryItems(e,t){e.innerHTML=`\n            <div class="gallery-grid">\n                ${t.map((e=>`\n                    <div class="gallery-item">\n                        <img src="${e.imageUrl}" alt="${e.title}" class="gallery-image">\n                        <div class="gallery-overlay">\n                            <h3>${e.title}</h3>\n                            ${e.subtitle?`<p>${e.subtitle}</p>`:""}\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n        `}renderMembershipPlans(e,t){e.innerHTML=`\n            <div class="membership-plans">\n                ${t.map((e=>`\n                    <div class="plan-card">\n                        <h3>${e.title}</h3>\n                        ${e.subtitle?`<div class="price">${e.subtitle}</div>`:""}\n                        <div class="plan-features">\n                            ${e.content.split("\n").map((e=>`<p>${e}</p>`)).join("")}\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n        `}renderMembershipBenefits(e,t){e.innerHTML=`\n            <div class="benefits-grid">\n                ${t.map((e=>`\n                    <div class="benefit-card">\n                        ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}" class="benefit-icon">`:""}\n                        <h3>${e.title}</h3>\n                        <p>${e.content}</p>\n                    </div>\n                `)).join("")}\n            </div>\n        `}renderProjectItems(e,t){e.innerHTML=`\n            <div class="projects-grid">\n                ${t.map((e=>`\n                    <div class="project-card">\n                        ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}" class="project-image">`:""}\n                        <div class="project-content">\n                            <h3>${e.title}</h3>\n                            ${e.subtitle?`<p class="project-category">${e.subtitle}</p>`:""}\n                            <p>${e.content}</p>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n        `}renderDefaultContent(e,t){e.innerHTML=t.map((e=>`\n            <div class="content-block">\n                <h3>${e.title}</h3>\n                ${e.subtitle?`<h4>${e.subtitle}</h4>`:""}\n                ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}">`:""}\n                <div class="content-text">${e.content}</div>\n            </div>\n        `)).join("")}}document.addEventListener("DOMContentLoaded",(()=>{(new ContentLoader).loadPageContent()}));class ContentManager{constructor(){this.contentTypes=["gallery","events","team","press"],this.currentType=null,this.init()}init(){this.setupEventListeners(),this.loadContentTypes()}setupEventListeners(){document.getElementById("contentTypeSelect")?.addEventListener("change",(e=>{this.currentType=e.target.value,this.loadContent(this.currentType)})),document.getElementById("addContentBtn")?.addEventListener("click",(()=>{this.showAddContentForm()}))}async loadContentTypes(){const e=document.getElementById("contentSection");e&&(e.innerHTML=`\n            <div class="content-header">\n                <div class="content-controls">\n                    <select id="contentTypeSelect" class="content-select">\n                        ${this.contentTypes.map((e=>`<option value="${e}">${e.charAt(0).toUpperCase()+e.slice(1)}</option>`)).join("")}\n                    </select>\n                    <button id="addContentBtn" class="add-content-btn">\n                        <i class="fas fa-plus"></i> Add New\n                    </button>\n                </div>\n            </div>\n            <div id="contentList" class="content-list"></div>\n            <div id="contentForm" class="content-form hidden"></div>\n        `,this.currentType=this.contentTypes[0],await this.loadContent(this.currentType))}async loadContent(e){if(document.getElementById("contentList"))try{const t=await fetch(`/api/admin/content/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!t.ok)throw new Error("Failed to load content");const n=await t.json();this.renderContentList(n)}catch(e){this.showError("Failed to load content. Please try again.")}}renderContentList(e){const t=document.getElementById("contentList");t&&(t.innerHTML=e.map((e=>`\n            <div class="content-item" data-id="${e._id}">\n                <div class="content-item-preview">\n                    ${e.image?`<img src="${e.image}" alt="${e.title}">`:""}\n                </div>\n                <div class="content-item-details">\n                    <h3>${e.title}</h3>\n                    <p>${e.description?.substring(0,100)}...</p>\n                </div>\n                <div class="content-item-actions">\n                    <button onclick="contentManager.editContent('${e._id}')" class="edit-btn">\n                        <i class="fas fa-edit"></i>\n                    </button>\n                    <button onclick="contentManager.deleteContent('${e._id}')" class="delete-btn">\n                        <i class="fas fa-trash"></i>\n                    </button>\n                </div>\n            </div>\n        `)).join(""))}showAddContentForm(){const e=document.getElementById("contentForm");e&&(e.classList.remove("hidden"),e.innerHTML=`\n            <form id="addContentForm" class="form">\n                <h3>Add New ${this.currentType.charAt(0).toUpperCase()+this.currentType.slice(1)}</h3>\n                <div class="form-group">\n                    <label for="title">Title</label>\n                    <input type="text" id="title" name="title" required>\n                </div>\n                <div class="form-group">\n                    <label for="description">Description</label>\n                    <textarea id="description" name="description" required></textarea>\n                </div>\n                <div class="form-group">\n                    <label for="image">Image URL</label>\n                    <input type="text" id="image" name="image">\n                </div>\n                ${this.getTypeSpecificFields()}\n                <div class="form-actions">\n                    <button type="submit" class="submit-btn">Save</button>\n                    <button type="button" onclick="contentManager.hideForm()" class="cancel-btn">Cancel</button>\n                </div>\n            </form>\n        `,document.getElementById("addContentForm")?.addEventListener("submit",(e=>{e.preventDefault(),this.saveContent(new FormData(e.target))})))}getTypeSpecificFields(){switch(this.currentType){case"events":return'\n                    <div class="form-group">\n                        <label for="date">Event Date</label>\n                        <input type="datetime-local" id="date" name="date" required>\n                    </div>\n                    <div class="form-group">\n                        <label for="location">Location</label>\n                        <input type="text" id="location" name="location" required>\n                    </div>\n                ';case"team":return'\n                    <div class="form-group">\n                        <label for="role">Role</label>\n                        <input type="text" id="role" name="role" required>\n                    </div>\n                    <div class="form-group">\n                        <label for="socialLinks">Social Links (comma-separated)</label>\n                        <input type="text" id="socialLinks" name="socialLinks">\n                    </div>\n                ';default:return""}}async saveContent(e){try{const t=Object.fromEntries(e.entries());if(!(await fetch(`/api/admin/content/${this.currentType}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(t)})).ok)throw new Error("Failed to save content");this.hideForm(),await this.loadContent(this.currentType),this.showSuccess("Content saved successfully!")}catch(e){this.showError("Failed to save content. Please try again.")}}async editContent(e){try{const t=await fetch(`/api/admin/content/${this.currentType}/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!t.ok)throw new Error("Failed to load content");const n=await t.json();this.showEditForm(n)}catch(e){this.showError("Failed to load content for editing. Please try again.")}}showEditForm(e){this.showAddContentForm();const t=document.getElementById("addContentForm");t&&(Object.entries(e).forEach((([e,n])=>{const i=t.elements[e];i&&("datetime-local"===i.type?i.value=new Date(n).toISOString().slice(0,16):i.value=n)})),t.onsubmit=async t=>{t.preventDefault(),await this.updateContent(e._id,new FormData(t.target))})}async updateContent(e,t){try{const n=Object.fromEntries(t.entries());if(!(await fetch(`/api/admin/content/${this.currentType}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(n)})).ok)throw new Error("Failed to update content");this.hideForm(),await this.loadContent(this.currentType),this.showSuccess("Content updated successfully!")}catch(e){this.showError("Failed to update content. Please try again.")}}async deleteContent(e){if(confirm("Are you sure you want to delete this item?"))try{if(!(await fetch(`/api/admin/content/${this.currentType}/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).ok)throw new Error("Failed to delete content");await this.loadContent(this.currentType),this.showSuccess("Content deleted successfully!")}catch(e){this.showError("Failed to delete content. Please try again.")}}hideForm(){const e=document.getElementById("contentForm");e&&(e.classList.add("hidden"),e.innerHTML="")}showError(e){const t=document.getElementById("errorMessage");t&&(t.textContent=e,t.classList.add("active"),setTimeout((()=>t.classList.remove("active")),5e3))}showSuccess(e){console.log(e)}}const contentManager=new ContentManager;async function fetchContent(e){try{const t=await fetch(`/api/content/${e}`);if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch content")}return await t.json()}catch(t){return console.error(`Error fetching ${e} content:`,t),[]}}async function updateAboutContent(){try{const e=await fetchContent("about"),t=document.getElementById("about-content");if(t&&e.length>0){const n=e[0];t.innerHTML=`\n                <h2>${n.title}</h2>\n                ${n.subtitle?`<h3>${n.subtitle}</h3>`:""}\n                <div class="content">${n.content}</div>\n            `}}catch(e){console.error("Error updating about content:",e)}}async function updateMissionContent(){try{const e=await fetchContent("mission"),t=document.getElementById("mission-content");if(t&&e.length>0){const n=e[0];t.innerHTML=`\n                <h2>${n.title}</h2>\n                ${n.subtitle?`<h3>${n.subtitle}</h3>`:""}\n                <div class="content">${n.content}</div>\n            `}}catch(e){console.error("Error updating mission content:",e)}}async function updateVisionContent(){try{const e=await fetchContent("vision"),t=document.getElementById("vision-content");if(t&&e.length>0){const n=e[0];t.innerHTML=`\n                <h2>${n.title}</h2>\n                ${n.subtitle?`<h3>${n.subtitle}</h3>`:""}\n                <div class="content">${n.content}</div>\n            `}}catch(e){console.error("Error updating vision content:",e)}}async function updateAchievements(){try{const e=await fetchContent("achievement"),t=document.getElementById("achievements-container");t&&(e.length>0?t.innerHTML=e.sort(((e,t)=>e.order-t.order)).map((e=>`\n                        <div class="achievement-card">\n                            ${e.image?`<img src="${e.image}" alt="${e.title}">`:""}\n                            <h3>${e.title}</h3>\n                            ${e.subtitle?`<h4>${e.subtitle}</h4>`:""}\n                            <p>${e.content}</p>\n                        </div>\n                    `)).join(""):t.innerHTML='<p class="text-center">No achievements to display</p>')}catch(e){console.error("Error updating achievements:",e)}}async function updateAnnouncements(){try{const e=await fetchContent("announcement"),t=document.getElementById("announcements-container");t&&(e.length>0?t.innerHTML=e.sort(((e,t)=>e.order-t.order)).map((e=>`\n                        <div class="announcement-card">\n                            ${e.image?`<img src="${e.image}" alt="${e.title}">`:""}\n                            <h3>${e.title}</h3>\n                            ${e.subtitle?`<h4>${e.subtitle}</h4>`:""}\n                            <p>${e.content}</p>\n                        </div>\n                    `)).join(""):t.innerHTML='<p class="text-center">No announcements to display</p>')}catch(e){console.error("Error updating announcements:",e)}}async function updateHeroSection(){try{const e=await fetch("/api/content?type=hero"),t=await e.json();if(t&&t.length>0){const e=t[0];document.querySelector(".hero-content h1").textContent=e.title,document.querySelector(".hero-content p:first-of-type").textContent=e.subtitle,document.querySelector(".hero-content p:last-of-type").textContent=e.content,e.imageUrl&&(document.querySelector(".hero-image img").src=e.imageUrl)}}catch(e){console.error("Error updating hero section:",e)}}async function updateMissionSection(){try{const e=await fetch("/api/content?type=mission"),t=await e.json();if(t&&t.length>0){document.querySelector(".mission-cards").innerHTML=t.sort(((e,t)=>e.order-t.order)).map((e=>`\n                    <div class="mission-card animate-fadeInUp">\n                        <div class="icon"><i class="${e.icon||"fas fa-check"}"></i></div>\n                        <h3>${e.title}:</h3>\n                        <p>${e.content}</p>\n                    </div>\n                `)).join("")}}catch(e){console.error("Error updating mission section:",e)}}async function updateVisionSection(){try{const e=await fetch("/api/content?type=vision"),t=await e.json();if(t&&t.length>0){document.querySelector(".vision-cards").innerHTML=t.sort(((e,t)=>e.order-t.order)).map((e=>`\n                    <div class="vision-card animate-fadeInUp">\n                        <div class="icon"><i class="${e.icon||"fas fa-check"}"></i></div>\n                        <h3>${e.content}</h3>\n                    </div>\n                `)).join("")}}catch(e){console.error("Error updating vision section:",e)}}async function updateEventsPreview(){try{const e=await fetch("/api/content?type=event"),t=await e.json();if(t&&t.length>0){document.querySelector(".event-cards").innerHTML=t.sort(((e,t)=>new Date(e.date)-new Date(t.date))).map((e=>`\n                    <div class="event-card animate-fadeInUp">\n                        <div class="event-image">\n                            ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}">`:""}\n                        </div>\n                        <div class="event-content">\n                            <h3>${e.title}</h3>\n                            <div class="date">\n                                <i class="fas fa-calendar"></i> \n                                ${new Date(e.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}\n                            </div>\n                            <p>${e.content}</p>\n                        </div>\n                    </div>\n                `)).join("")}}catch(e){console.error("Error updating events preview:",e)}}function initializeAchievementsSwiper(){document.querySelector(".achievements .swiper-wrapper")&&new Swiper(".achievements .swiper",{slidesPerView:"auto",spaceBetween:20,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:10},480:{slidesPerView:2,spaceBetween:15},768:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:20}}})}async function updateAchievements(){try{const e=await fetch("/api/content?type=achievement"),t=await e.json();if(t&&t.length>0){document.querySelector(".achievements .swiper-wrapper").innerHTML=t.sort(((e,t)=>t.createdAt-e.createdAt)).map((e=>`\n                    <div class="swiper-slide">\n                        <div class="achievement-card">\n                            ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.title}">`:'<div class="placeholder-image"></div>'}\n                            <h3>${e.title}</h3>\n                            <p>${e.content}</p>\n                        </div>\n                    </div>\n                `)).join(""),t.length>4&&initializeAchievementsSwiper()}}catch(e){console.error("Error updating achievements:",e)}}async function loadUpcomingEvents(){try{const e=await fetch("/api/events?limit=3&upcoming=true");if(!e.ok)throw new Error("Failed to fetch events");displayEvents(await e.json())}catch(e){console.error("Error loading events:",e)}}function displayEvents(e){const t=document.getElementById("events-container");t.innerHTML="",e.forEach((e=>{const n=new Date(e.date),i=document.createElement("div");i.className="col-md-4 mb-4",i.innerHTML=`\n            <div class="card h-100">\n                ${e.image?`<img src="${e.image}" class="card-img-top" alt="${e.title}">`:""}\n                <div class="card-body">\n                    <h5 class="card-title">${e.title}</h5>\n                    <p class="card-text">${e.description}</p>\n                    <p class="card-text">\n                        <small class="text-muted">\n                            <i class="far fa-calendar"></i> ${n.toLocaleDateString()}\n                            <br>\n                            <i class="far fa-clock"></i> ${e.time}\n                        </small>\n                    </p>\n                </div>\n                <div class="card-footer bg-transparent">\n                    <a href="/pages/events.html#${e._id}" class="btn btn-primary btn-sm">Learn More</a>\n                </div>\n            </div>\n        `,t.appendChild(i)}))}async function loadFeaturedProjects(){try{const e=await fetch("/api/projects?featured=true&limit=3");if(!e.ok)throw new Error("Failed to fetch projects");displayProjects(await e.json())}catch(e){console.error("Error loading projects:",e)}}function displayProjects(e){const t=document.getElementById("projects-container");t.innerHTML="",e.forEach((e=>{const n=document.createElement("div");n.className="col-md-4 mb-4",n.innerHTML=`\n            <div class="card h-100">\n                ${e.image?`<img src="${e.image}" class="card-img-top" alt="${e.title}">`:""}\n                <div class="card-body">\n                    <h5 class="card-title">${e.title}</h5>\n                    <p class="card-text">${e.description}</p>\n                    <div class="project-tech">\n                        ${e.technologies.map((e=>`\n                            <span class="badge bg-secondary me-1">${e}</span>\n                        `)).join("")}\n                    </div>\n                </div>\n                <div class="card-footer bg-transparent">\n                    <a href="/pages/projects.html#${e._id}" class="btn btn-primary btn-sm">View Project</a>\n                </div>\n            </div>\n        `,t.appendChild(n)}))}function isInitialLoadOrRefresh(){return sessionStorage.getItem("pageLoaded")?1===performance.navigation.type:(sessionStorage.setItem("pageLoaded","true"),!0)}function handleLoading(){isInitialLoadOrRefresh()&&"/loading.html"!==window.location.pathname&&(sessionStorage.setItem("destination",window.location.pathname),window.location.href="/loading.html")}document.addEventListener("DOMContentLoaded",(async()=>{const e=[];document.getElementById("about-content")&&e.push(updateAboutContent()),document.getElementById("mission-content")&&e.push(updateMissionContent()),document.getElementById("vision-content")&&e.push(updateVisionContent()),document.getElementById("achievements-container")&&e.push(updateAchievements()),document.getElementById("announcements-container")&&e.push(updateAnnouncements()),await Promise.all(e)})),document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".event-cards");!async function(){const e=await async function(){try{const e=await fetch("/pages/events.html"),t=await e.text(),n=(new DOMParser).parseFromString(t,"text/html"),i=Array.from(n.querySelectorAll(".carousel .card")),a=i.find((e=>e.querySelector(".card-title").textContent.toLowerCase().includes("gaming"))),o=i.filter((e=>!e.querySelector(".card-title").textContent.toLowerCase().includes("gaming"))).slice(0,2);return[o[0],a,o[1]].map((e=>({title:e.querySelector(".card-title").textContent,date:e.querySelector(".card-date").textContent,description:e.querySelector(".event-details").textContent,image:e.querySelector(".event-image")?.getAttribute("src")||"/images/events/default.jpg"})))}catch(e){return console.error("Error fetching preview events:",e),[]}}(),t=document.querySelectorAll(".event-card");e.forEach(((e,n)=>{if(t[n]){const i=t[n];i.querySelector(".event-image").style.backgroundImage=`url('${e.image}')`,i.querySelector("h3").textContent=e.title,i.querySelector(".date").innerHTML=`<i class="fas fa-calendar"></i> ${e.date}`,i.querySelector("p").textContent=e.description}}))}()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".carousel"),t=document.querySelectorAll(".card"),n=document.querySelector(".prev"),i=document.querySelector(".next"),a=document.querySelectorAll(".indicator");let o=0;let s=0,r=!1;function c(e){"prev"===e&&o>0?(o--,l()):"next"===e&&o<t.length-1&&(o++,l())}function l(){e.style.transform=`translateX(-${100*o}%)`,a.forEach(((e,t)=>{t===o?(e.classList.add("active"),e.style.transform="scale(1.2)"):(e.classList.remove("active"),e.style.transform="scale(1)")})),n.style.opacity=0===o?"0.5":"1",i.style.opacity=o===t.length-1?"0.5":"1",t.forEach(((e,t)=>{t===o?e.classList.add("active-card"):e.classList.remove("active-card")}))}l(),document.addEventListener("keydown",(function(e){"ArrowLeft"===e.key?c("prev"):"ArrowRight"===e.key&&c("next")})),e.addEventListener("touchstart",(function(e){s=e.touches[0].clientX,r=!0})),e.addEventListener("touchmove",(function(e){if(!r)return;e.preventDefault();const t=e.touches[0].clientX,n=s-t;Math.abs(n)>50&&(c(n>0?"next":"prev"),r=!1)})),e.addEventListener("touchend",(function(){r=!1})),n.addEventListener("click",(()=>c("prev"))),i.addEventListener("click",(()=>c("next"))),a.forEach((e=>{e.addEventListener("click",(function(){o=parseInt(this.dataset.index),l()}))}));let d=setInterval(u,5e3);function u(){o<t.length-1?o++:o=0,l()}e.parentElement.addEventListener("mouseenter",(()=>clearInterval(d))),e.parentElement.addEventListener("mouseleave",(()=>d=setInterval(u,5e3)));document.querySelectorAll(".register-btn").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.closest(".card"),n=t.querySelector(".card-title").textContent;t.querySelector(".card-date").textContent;!function(e){const t=document.createElement("div");t.className="registration-modal",t.innerHTML=`\n            <div class="modal-content">\n                <h2>Register for ${e}</h2>\n                <form id="registrationForm">\n                    <input type="text" placeholder="Full Name" required>\n                    <input type="email" placeholder="Email" required>\n                    <input type="tel" placeholder="Phone Number" required>\n                    <input type="text" placeholder="College/Institution" required>\n                    <button type="submit" class="submit-btn">Submit Registration</button>\n                    <button type="button" class="cancel-btn">Cancel</button>\n                </form>\n            </div>\n        `,document.body.appendChild(t);t.querySelector("#registrationForm").addEventListener("submit",(function(n){n.preventDefault(),t.innerHTML=`\n                <div class="modal-content success">\n                    <h2>Registration Successful!</h2>\n                    <p>You have been registered for ${e}</p>\n                    <p>We'll send the details to your email.</p>\n                    <button class="close-btn">Close</button>\n                </div>\n            `,t.querySelector(".close-btn").addEventListener("click",(()=>{t.remove(),function(e){const t=document.querySelectorAll(".card");t.forEach((t=>{if(t.querySelector(".card-title").textContent===e){const e=t.querySelector(".register-btn");e.innerHTML="Registered!",e.style.background="linear-gradient(135deg, #28a745, #20c997)",e.disabled=!0}}))}(e)}))})),t.querySelector(".cancel-btn").addEventListener("click",(()=>t.remove()))}(n)}))})),function(){const e=document.createElement("div");e.className="techfusion-notification",e.innerHTML='\n            <div class="notification-content">\n                <div class="bot-animation">\n                    <div class="bot-head">\n                        <div class="bot-eye left"></div>\n                        <div class="bot-eye right"></div>\n                    </div>\n                    <div class="bot-body"></div>\n                </div>\n                <div class="notification-text">\n                    <h3>TechFusion 2K25-26</h3>\n                    <p>Coming Soon! Stay tuned for dates</p>\n                </div>\n                <button class="notification-close">Ã—</button>\n            </div>\n        ',document.body.appendChild(e),e.querySelector(".notification-close").addEventListener("click",(()=>{e.classList.add("fade-out"),setTimeout((()=>e.remove()),300)})),setTimeout((()=>{document.body.contains(e)&&(e.classList.add("fade-out"),setTimeout((()=>e.remove()),300))}),1e4)}()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".join-form");function t(e,t){e.classList.add("invalid");const n=document.createElement("span");n.className="error-message",n.textContent=t,e.parentElement.appendChild(n)}function n(e,t){let n=document.querySelector(".notification");n||(n=document.createElement("div"),n.className="notification",document.body.appendChild(n)),n.textContent=e,n.className=`notification ${t}`,n.style.display="block",setTimeout((()=>{n.style.display="none"}),5e3)}e&&e.addEventListener("submit",(async function(i){i.preventDefault();const a={},o=e.querySelectorAll("input, select, textarea");o.forEach((e=>{"checkbox"===e.type?a[e.name]=e.checked:e.name&&(a[e.name]=e.value.trim())})),o.forEach((e=>{e.classList.remove("invalid");const t=e.parentElement.querySelector(".error-message");t&&t.remove()}));const s=e.querySelectorAll("[required]");let r=!0,c=null;if(s.forEach((e=>{e.value.trim()||(r=!1,t(e,"This field is required"),c||(c=e))})),!r)return n("Please fill all required fields marked with *","error"),c.focus(),!1;if(!grecaptcha.getResponse())return n("Please complete the reCAPTCHA verification","error"),!1;await async function(i){try{n("Processing your application...","info");const a=await fetch("/api/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),o=await a.json();if(!a.ok){if(o.field){const n=e.querySelector(`[name="${o.field}"]`);n&&(t(n,o.message),n.focus())}throw new Error(o.message||"Submission failed")}e.reset(),grecaptcha.reset(),n(o.message||"Application submitted successfully! Please check your email.","success"),window.scrollTo({top:0,behavior:"smooth"})}catch(e){console.error("Submission error:",e),n(e.message||"Submission failed. Please try again.","error")}}(a)}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".gallery-item"),t=document.querySelectorAll(".filter-btn"),n=document.querySelector(".search-input"),i=document.querySelector(".lightbox"),a=document.querySelector(".lightbox-content"),o=document.querySelector(".lightbox-title"),s=document.querySelector(".lightbox-desc"),r=document.querySelector(".close-lightbox"),c=document.querySelector(".prev-btn"),l=document.querySelector(".next-btn"),d=document.querySelector(".image-counter"),u=document.querySelector(".load-more-btn"),m=document.querySelectorAll(".view-btn"),v=document.querySelector(".gallery-container");let p=0,h=[],y="grid";function g(){h=Array.from(e).filter((e=>"none"!==e.style.display&&e.classList.contains("visible")))}function f(){d.textContent=`${p+1} / ${h.length}`}function b(e){const t=h[e],n=t.querySelector(".item-caption h3").textContent,i=t.querySelector(".item-caption p").textContent,o=null!==t.querySelector(".video-indicator");if(a.innerHTML="",o){const e=document.createElement("video");e.src=t.querySelector("video").src,e.controls=!0,e.autoplay=!0,a.appendChild(e)}else{const e=document.createElement("img");e.src=t.querySelector("img").src,e.alt=t.querySelector("img").alt,a.appendChild(e)}const s=document.createElement("div");s.className="lightbox-info",s.innerHTML=`\n            <h3 class="lightbox-title">${n}</h3>\n            <p class="lightbox-desc">${i}</p>\n        `,a.appendChild(s),f()}if(e.forEach(((e,t)=>{t<16?setTimeout((()=>{e.classList.add("visible")}),100*t):e.style.display="none"})),u.addEventListener("click",(function(){let t=Array.from(e).filter((e=>"none"===e.style.display));if(t.length>0){t.slice(0,8).forEach(((e,t)=>{e.style.display="block",setTimeout((()=>{e.classList.add("visible")}),100*t)})),t.length<=8&&(u.style.display="none")}})),m.forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-view");m.forEach((e=>e.classList.remove("active"))),this.classList.add("active"),"grid"===t?(v.classList.remove("masonry-view"),y="grid"):"masonry"===t&&(v.classList.add("masonry-view"),y="masonry"),"masonry"===y?e.forEach((e=>{e.classList.remove("featured-item","wide-item","tall-item")})):e.forEach((e=>{e.hasAttribute("data-featured")&&e.classList.add("featured-item"),e.hasAttribute("data-wide")&&e.classList.add("wide-item"),e.hasAttribute("data-tall")&&e.classList.add("tall-item")}))}))})),t.forEach((n=>{n.addEventListener("click",(function(){const n=this.getAttribute("data-filter");t.forEach((e=>e.classList.remove("active"))),this.classList.add("active"),e.forEach((e=>{const t=e.getAttribute("data-category");e.style.display="none",e.classList.remove("visible"),"all"!==n&&t!==n||(e.style.display="block",setTimeout((()=>{e.classList.add("visible")}),300*Math.random()))})),setTimeout(g,500);let i=Array.from(e).filter((e=>"none"===e.style.display));u.style.display=i.length>0?"inline-block":"none"}))})),n.addEventListener("input",(function(){const t=this.value.toLowerCase().trim();e.forEach((e=>{const n=e.querySelector(".item-caption h3").textContent.toLowerCase(),i=e.querySelector(".item-caption p").textContent.toLowerCase(),a=e.getAttribute("data-tags")?e.getAttribute("data-tags").toLowerCase():"";e.style.display="none",e.classList.remove("visible"),(""===t||n.includes(t)||i.includes(t)||a.includes(t))&&(e.style.display="block",setTimeout((()=>{e.classList.add("visible")}),300*Math.random()))})),setTimeout(g,500)})),e.forEach(((e,t)=>{e.addEventListener("click",(function(){const e=this.querySelector(".item-caption h3").textContent,t=this.querySelector(".item-caption p").textContent,n=null!==this.querySelector(".video-indicator");if(o.textContent=e,s.textContent=t,a.innerHTML="",n){const e=document.createElement("video");e.src=this.querySelector("video").src,e.controls=!0,e.autoplay=!0,a.appendChild(e)}else{const e=document.createElement("img");e.src=this.querySelector("img").src,e.alt=this.querySelector("img").alt,a.appendChild(e)}const r=document.createElement("div");r.className="lightbox-info",r.innerHTML=`\n                <h3 class="lightbox-title">${e}</h3>\n                <p class="lightbox-desc">${t}</p>\n            `,a.appendChild(r),i.style.display="flex",setTimeout((()=>{i.classList.add("visible")}),50),p=Array.from(h).indexOf(this),f(),document.body.style.overflow="hidden"}))})),r.addEventListener("click",(function(){i.classList.remove("visible"),setTimeout((()=>{i.style.display="none";const e=a.querySelector("video");e&&e.pause()}),300),document.body.style.overflow="auto"})),c.addEventListener("click",(function(){p>0?p--:p=h.length-1,b(p)})),l.addEventListener("click",(function(){p<h.length-1?p++:p=0,b(p)})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&i.classList.contains("visible")&&r.click(),"ArrowLeft"===e.key&&i.classList.contains("visible")&&c.click(),"ArrowRight"===e.key&&i.classList.contains("visible")&&l.click()})),i.addEventListener("click",(function(e){e.target===i&&r.click()})),g(),e.forEach((e=>{e.classList.contains("featured-item")&&e.setAttribute("data-featured","true"),e.classList.contains("wide-item")&&e.setAttribute("data-wide","true"),e.classList.contains("tall-item")&&e.setAttribute("data-tall","true")})),"IntersectionObserver"in window){const t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target,i=n.querySelector("img"),a=n.querySelector("video");i&&i.getAttribute("data-src")&&(i.src=i.getAttribute("data-src"),i.removeAttribute("data-src")),a&&a.getAttribute("data-src")&&(a.src=a.getAttribute("data-src"),a.removeAttribute("data-src")),t.unobserve(n)}}))}));e.forEach((e=>{t.observe(e)}))}e.forEach((e=>{e.addEventListener("mousemove",(function(e){const t=this.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top,a=n/t.width*100,o=(50-i/t.height*100)/10,s=(a-50)/10;this.style.transform=`perspective(1000px) rotateX(${o}deg) rotateY(${s}deg) scale3d(1.05, 1.05, 1.05)`})),e.addEventListener("mouseleave",(function(){this.style.transform=""}))}));const w=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target;e.isIntersecting||t.pause()}))}),{threshold:.5});function r(){currentVideo&&(currentVideo.pause(),currentVideo=null),i.classList.remove("active"),document.body.style.overflow=""}if(document.querySelectorAll(".video-item video").forEach((e=>{w.observe(e),e.hasAttribute("poster")||e.setAttribute("poster","/images/gallery/video-poster.jpg")})),t.forEach((n=>{n.addEventListener("click",(()=>{t.forEach((e=>e.classList.remove("active"))),n.classList.add("active");const i=n.dataset.filter;v.classList.add("loading"),setTimeout((()=>{e.forEach((e=>{const t="all"===i||e.dataset.category===i;e.style.display=t?"block":"none";const n=e.querySelector("video");n&&!t&&n.pause()})),v.classList.remove("loading")}),300)}))})),document.querySelectorAll(".video-item").forEach((e=>{const t=e.querySelector("video");e.querySelector(".video-indicator");e.addEventListener("click",(t=>{t.preventDefault(),function(e){const t=e.classList.contains("video-item"),n=t?e.querySelector("video").cloneNode(!0):e.querySelector("img").cloneNode(!0);a.innerHTML="",a.appendChild(n),t&&(n.controls=!0,n.autoplay=!0,n.loop=!0,currentVideo=n,n.addEventListener("loadedmetadata",(()=>{n.play().catch(console.error)})));i.classList.add("active"),document.body.style.overflow="hidden"}(e)})),e.addEventListener("mouseenter",(()=>{t.paused&&t.play().catch((()=>{console.log("Autoplay prevented")}))})),e.addEventListener("mouseleave",(()=>{t.paused||(t.pause(),t.currentTime=0)}))})),r.addEventListener("click",r),i.addEventListener("click",(e=>{e.target===i&&r()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&i.classList.contains("active")&&r()})),"loading"in HTMLImageElement.prototype)document.querySelectorAll('video[loading="lazy"]').forEach((e=>{e.src=e.dataset.src}));else{const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const n=t.target;n.src=n.dataset.src,e.unobserve(n)}}))}));document.querySelectorAll('video[loading="lazy"]').forEach((t=>{e.observe(t)}))}})),document.addEventListener("DOMContentLoaded",(async()=>{await Promise.all([updateHeroSection(),updateMissionSection(),updateVisionSection(),updateEventsPreview(),updateAchievements(),loadUpcomingEvents(),loadFeaturedProjects()])})),document.addEventListener("DOMContentLoaded",(function(){const e=function(){const e=document.querySelector("header"),t=document.querySelector(".mobile-menu-toggle"),n=document.querySelector(".nav-menu"),i=document.querySelectorAll("nav ul li");if(!e||!t||!n)return;i.forEach(((e,t)=>{e.style.setProperty("--i",t)})),t.addEventListener("click",(function(e){e.stopPropagation(),s()})),i.forEach((e=>{e.addEventListener("click",(()=>{window.innerWidth<=768&&s(!1)}))})),document.addEventListener("click",(function(e){window.innerWidth<=768&&!n.contains(e.target)&&!t.contains(e.target)&&n.classList.contains("active")&&s(!1)}));let a,o=0;function s(e){const t=void 0!==e?e:!n.classList.contains("active");n.classList.toggle("active",t),document.body.classList.toggle("menu-open",t),i.forEach((e=>{e.style.transitionDelay=t?.1*parseFloat(e.style.getPropertyValue("--i"))+"s":"0s"}))}window.addEventListener("scroll",(()=>{const t=window.pageYOffset;e.style.transform=t>o&&t>100?"translateY(-100%)":"translateY(0)",o=t})),window.addEventListener("resize",(()=>{clearTimeout(a),a=setTimeout((()=>{window.innerWidth>768&&s(!1)}),250)}));const r=window.location.pathname;i.forEach((e=>{const t=e.querySelector("a");t&&(t.getAttribute("href")===r||r.includes(t.getAttribute("href")))&&e.classList.add("active")}))},t=function(){const e=document.querySelector("form");e&&e.addEventListener("submit",(function(e){e.preventDefault();const t=this.querySelector('input[type="email"]');if(t&&t.value){const e=document.createElement("p");e.className="success-message",e.textContent="Thank you for subscribing!",e.style.color="#1da1f2",this.innerHTML="",this.appendChild(e)}}))};!function(){const n=document.getElementsByTagName("include");Array.from(n).forEach((n=>{const i=n.getAttribute("src");fetch(i).then((e=>{if(e.ok)return e.text();throw new Error("File not found")})).then((a=>{n.insertAdjacentHTML("afterend",a),n.remove(),i.includes("header")?e():i.includes("footer")&&t()})).catch((e=>{console.error(`Error including file ${i}:`,e),n.insertAdjacentHTML("afterend",`<div class="error">Failed to load ${i}</div>`),n.remove()}))}))}()}));const pagesToPreload=["/pages/gallery.html","/pages/events.html","/pages/about.html","/pages/contact.html"],pageCache=new Map;async function preloadPages(){const e=pagesToPreload.map((async e=>{try{const t=await fetch(e),n=await t.text();pageCache.set(e,n)}catch(t){console.warn(`Failed to preload ${e}:`,t)}}));await Promise.all(e)}function initLoading(){const e=document.querySelector(".loader");e&&(e.style.display="flex")}function hideLoading(){const e=document.querySelector(".loader");e&&(e.style.opacity="0",setTimeout((()=>{e.style.display="none"}),500))}async function loadContent(e){try{const t=await fetch(`/api/content?type=${e}&isActive=true`);if(!t.ok)throw new Error(`Failed to fetch ${e} content`);return(await t.json()).sort(((e,t)=>e.order-t.order))}catch(t){return console.error(`Error loading ${e} content:`,t),[]}}async function updateHeroSection(){const e=await loadContent("hero");if(0===e.length)return;const t=e[0],n=document.querySelector(".hero");if(!n)return;const i=n.querySelector(".hero-content");i&&(i.innerHTML=`\n            <h1>${t.title}</h1>\n            ${t.subtitle?`<p>${t.subtitle}</p>`:""}\n            <p>${t.content}</p>\n            <div class="hero-buttons">\n                <a href="/pages/membership.html" class="btn-primary">Join TIC</a>\n                <a href="/pages/about.html" class="btn-secondary">Learn More</a>\n            </div>\n        `);const a=n.querySelector(".hero-image img");a&&t.image&&(a.src=t.image)}async function updateMissionSection(){const e=await loadContent("mission"),t=document.querySelector(".mission-cards");t&&(t.innerHTML=e.map((e=>`\n        <div class="mission-card animate-fadeInUp">\n            <div class="icon"><i class="fas fa-check"></i></div>\n            <h3>${e.title}:</h3>\n            <p>${e.content}</p>\n        </div>\n    `)).join(""))}async function updateVisionSection(){const e=await loadContent("vision"),t=document.querySelector(".vision-cards");t&&(t.innerHTML=e.map((e=>`\n        <div class="vision-card animate-fadeInUp">\n            <div class="icon"><i class="fas fa-check"></i></div>\n            <h3>${e.content}</h3>\n        </div>\n    `)).join(""))}async function updateAchievements(){const e=await loadContent("achievement"),t=document.querySelector(".achievements .swiper-wrapper");t&&(t.innerHTML=e.map((e=>`\n        <div class="swiper-slide">\n            <div class="achievement-card">\n                ${e.image?`<img src="${e.image}" alt="${e.title}">`:""}\n                <h3>${e.title}</h3>\n                <p>${e.content}</p>\n            </div>\n        </div>\n    `)).join(""),new Swiper(".achievements .swiper",{slidesPerView:"auto",spaceBetween:20,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{640:{slidesPerView:2},1024:{slidesPerView:3}}}))}async function updateEvents(){const e=await loadContent("event"),t=document.querySelector(".event-cards");t&&(t.innerHTML=e.map((e=>`\n        <div class="event-card animate-fadeInUp">\n            <div class="event-image">\n                ${e.image?`<img src="${e.image}" alt="${e.title}">`:""}\n            </div>\n            <div class="event-content">\n                <h3>${e.title}</h3>\n                <div class="date"><i class="fas fa-calendar"></i> ${e.subtitle||""}</div>\n                <p>${e.content}</p>\n            </div>\n        </div>\n    `)).join(""))}"loading"===document.readyState&&handleLoading(),window.addEventListener("load",(()=>{initLoading(),preloadPages().then((()=>{hideLoading()}))})),document.addEventListener("DOMContentLoaded",(async()=>{await Promise.all([updateHeroSection(),updateMissionSection(),updateVisionSection(),updateAchievements(),updateEvents()])})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".techfusion-preview");function t(e){return`\n            <div class="preview-card">\n                <div class="preview-image-container">\n                    <img src="${e.image}" alt="${e.title}" class="preview-image">\n                </div>\n                <div class="preview-content">\n                    <h3 class="preview-title">${e.title}</h3>\n                    <div class="preview-date">${e.date}</div>\n                    <p class="preview-description">${e.description}</p>\n                </div>\n            </div>\n        `}!async function(){const n=await async function(){try{const e=await fetch("/pages/events.html"),t=await e.text(),n=(new DOMParser).parseFromString(t,"text/html");return Array.from(n.querySelectorAll(".carousel .card")).slice(0,3).map((e=>({title:e.querySelector(".card-title").textContent,date:e.querySelector(".card-date").textContent,description:e.querySelector(".event-details").textContent,image:e.querySelector(".event-image")?.getAttribute("src")||"/images/events/default.jpg"})))}catch(e){return console.error("Error fetching preview events:",e),[]}}();0!==n.length?e.innerHTML=`\n            <div class="preview-header">\n                <h2>TechFusion Preview</h2>\n                <a href="/pages/events.html" class="view-all-btn">View All Events</a>\n            </div>\n            <div class="preview-grid">\n                ${n.map(t).join("")}\n            </div>\n        `:e.innerHTML='<p class="no-preview">Stay tuned for upcoming events!</p>'}()}));